# Streamlit実装プラン - Note有料記事検索ツール

## 画面構成

### メインページレイアウト
```
┌─────────────────────────────────────────────┐
│  📰 Note有料記事検索ツール                      │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│                                              │
│  検索キーワード: [_______________]            │
│                                              │
│  フィルタープリセット:                         │
│  ○ ゆるめ  ○ 標準  ● 厳しめ  ○ カスタム      │
│                                              │
│  [▼ 詳細設定]                                │
│  ┌─────────────────────────────────────────┐│
│  │ 取得ページ数: [1---------10--------20]   ││
│  │ 価格上限: [_____] 円                    ││
│  │ 最低いいね数: [_____]                   ││
│  │ カスタム除外ワード:                     ││
│  │ [___________________________________]  ││
│  └─────────────────────────────────────────┘│
│                                              │
│  [🔍 検索実行]                               │
│                                              │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│  検索結果 (123件)              [📥 CSV保存]   │
│  ┌─────┬──────┬──────────────┬──────┬──────┐│
│  │いいね│ 価格  │ タイトル      │著者  │公開日 ││
│  ├─────┼──────┼──────────────┼──────┼──────┤│
│  │ 523 │¥1000│エッセイ...    │user1 │01/20 ││
│  │ 412 │ ¥500│創作ノート...  │user2 │01/19 ││
│  └─────┴──────┴──────────────┴──────┴──────┘│
└─────────────────────────────────────────────┘
```

### サイドバー構成
- 使い方ガイド
- APIアクセス状況
- エラーログ（展開可能）

## 実装フェーズ

### Phase 1: 基本機能実装（MVP）
**目標**: 最小限の検索・表示機能

1. **プロジェクト構成**
   ```
   note-like/
   ├── app.py              # メインアプリ
   ├── requirements.txt    # 依存関係
   ├── .gitignore
   └── README.md
   ```

2. **基本UI実装**
   - 検索キーワード入力
   - プリセットフィルター選択（標準のみ）
   - 検索実行ボタン
   - 結果表示テーブル

3. **API連携**
   - note API呼び出し（基本的なエラーハンドリング）
   - レート制限対応（固定1秒待機）
   - 10ページ固定取得

4. **データ処理**
   - 有料記事フィルタリング
   - いいね数ソート
   - 基本的な除外ワード処理

### Phase 2: フィルター機能強化
**目標**: 使いやすいフィルター機能

1. **プリセットフィルター実装**
   - ゆるめ/標準/厳しめ/カスタム
   - 除外ワードリストの定義

2. **詳細設定UI**
   - エキスパンダーによる詳細設定表示
   - スライダー、数値入力の実装
   - カスタム除外ワード入力

3. **フィルター処理改善**
   - 大文字小文字を区別しない検索
   - 複数条件の組み合わせ

### Phase 3: UX改善
**目標**: 使いやすさの向上

1. **進捗表示**
   - プログレスバー
   - 取得中メッセージ
   - 取得済み件数表示

2. **エラーハンドリング改善**
   - ユーザーフレンドリーなエラーメッセージ
   - 部分的な結果の表示
   - リトライ機能

3. **結果表示改善**
   - ページネーション
   - 列の並び替え
   - タイトルクリックでnoteページへ

### Phase 4: デプロイ準備
**目標**: Streamlit Cloudでの公開

1. **環境変数対応**
   - st.secrets対応
   - 設定の外部化

2. **パフォーマンス最適化**
   - セッション状態の活用
   - キャッシュ実装（@st.cache_data）

3. **デプロイ設定**
   - GitHub連携
   - Streamlit Cloud設定
   - 使用ガイド作成

## 技術スタック

### 必須ライブラリ
```txt
streamlit==1.28.0
requests==2.31.0
pandas==2.1.0
python-dateutil==2.8.2
```

### 開発環境
- Python 3.9+
- Git/GitHub
- VSCode推奨

## セキュリティ・コンプライアンス

1. **レート制限遵守**
   - 800-1200msのランダム待機
   - 429エラー時の自動バックオフ

2. **エラー情報の取り扱い**
   - APIキーなどの秘密情報は扱わない
   - エラーログに個人情報を含めない

3. **利用規約の表示**
   - 個人利用限定の注意書き
   - note利用規約へのリンク

## テスト計画

### 単体テスト
- API呼び出し関数
- フィルター処理
- データ変換

### 統合テスト  
- エンドツーエンドの検索フロー
- エラー時の挙動
- CSV出力

### ユーザビリティテスト
- 初回利用者の操作確認
- エラーメッセージの理解度
- 処理時間の体感評価